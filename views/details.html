{{extend 'layout.html'}}

{{block page_js}}
<script>
  // JavaScript for handling any dynamic functionality
  document.addEventListener("DOMContentLoaded", function() {
    // Example: Attaching event listeners to elements
    const addAttachmentBtn = document.getElementById("addAttachmentBtn");
    if (addAttachmentBtn) {
      addAttachmentBtn.addEventListener("click", function() {
        // Add your logic for adding an attachment
        alert("Add Attachment button clicked!");
      });
    }
  });
</script>
{{end page_js}}

<div class="maintenance-transformer-detail-page">
  <!-- Header Section (You might want to move this to layout.html) -->
  <div class="header">
    <div class="soluna-logo">
      SOLUNA | Maintenance Dashboard
    </div>
    <div class="header-links">
      <a href="#">Overview</a>
      <a href="#">Map</a>
      <a href="#">Maintenance</a>
      <a href="#">Settings</a>
      <div class="select-site">
        Select Site: All - Soluna <i class="fas fa-caret-down"></i>
      </div>
      <div class="user-profile">
        <i class="fas fa-user-circle"></i>
      </div>
    </div>
  </div>

  <!-- Sub-Header with Breadcrumbs -->
  <div class="sub-header">
    <a href="#">
      < Maintenance / XFMR DV1SL01
    </a>
    <div class="documentation">
      Documentation <i class="fas fa-book"></i>
    </div>
  </div>

  <!-- Equipment Details Section -->
  <div class="equipment-details">
    <h2>Equipment Details</h2>
    <div class="edit-equipment">
      Edit Equipment <i class="fas fa-pencil-alt"></i>
    </div>

    <div class="details-grid">
      <div class="detail-item">
        Type: <span>{{=equipment.name}}</span>
      </div>
      <div class="detail-item">
        Serial #: <span>{{=equipment.manufacturer_serial}}</span>
      </div>
      <div class="detail-item">
        Asset Tag: <span>{{=equipment.soluna_asset_tag}}</span>
      </div>
      <div class="detail-item">
        Status: <span class="status out-of-service">Out of Service</span>
      </div>
      <div class="detail-item">
        Cooling Method: <span>Mineral Oil</span>
      </div>
      <div class="detail-item">
        Manuf. Date: <span>{{=equipment.created_on}}</span>
      </div>
      <div class="detail-item">
        Project: <span>Dorothy 1</span>
      </div>
      <div class="detail-item">
        Customer: <span>Bit Digital</span>
      </div>
      <div class="detail-item">
        Location: <span>Pod 18</span>
      </div>
      <div class="detail-item">
        Upgrades: <span>Fans</span>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Required Maintenance Section -->
    <div class="required-maintenance">
      <h3>Required Maintenance</h3>
      <table>
        <thead>
          <tr>
            <th>Activity</th>
            <th>Last Completed</th>
            <th>Upcoming</th>
          </tr>
        </thead>
        <tbody>
          {{if maintenance_schedule:}}
            {{for item in maintenance_schedule:}}
              <tr>
                <td>{{=item['activity']}}</td>
                <td>{{=item['last_completed']}}</td>
                <td>{{=item['upcoming']}}</td>
              </tr>
            {{pass}}
          {{else:}}
            <tr>
              <td colspan="3">No maintenance schedule found for this equipment.</td>
            </tr>
          {{pass}}
        </tbody>
      </table>
    </div>

    <!-- Report Section -->
    <div class="report">
      <div class="report-header">
        <h3>Report</h3>
        <button class="new-report-btn">New Report</button>
      </div>
      <div class="report-details">
        <h4>XFMR SW15L01</h4>
        <div class="report-name">
          DGA DV 09/06/2024 #R4
        </div>
        <div class="edit-report">
          Edit Report <i class="fas fa-pencil-alt"></i>
        </div>

        <div class="report-grid">
          <div class="report-item">
            Report Type: <span>DGA</span>
          </div>
          <div class="report-item">
            Action Status: <span>In Progress</span>
          </div>
          <div class="report-item">
            Report Date: <span>02/06/2024 1:44PM</span>
          </div>
          <div class="report-item">
            DGA Due: <span>07/06/2024</span>
          </div>
          <div class="report-item">
            Test Data: <span>N/A</span>
          </div>
          <div class="report-item">
            Due Action: <span>Re-test</span>
          </div>
          <div class="report-item">
            Location: <span>MADDOX</span>
          </div>
          <div class="report-item">
            Report by: <span>Nathan Marshall</span>
          </div>
        </div>
        <div class="report-note">
          Note
        </div>

        <!-- Add Attachment -->
        <button class="add-attachment-btn" id="addAttachmentBtn">
          + Add Attachment
        </button>
      </div>
    </div>

    <!-- Report History Section -->
    <div class="report-history">
      <div class="report-history-header">
        <h3>Report History</h3>
        <div class="report-history-options">
          2024 <i class="fas fa-caret-down"></i>
          <i class="fas fa-sort-amount-down"></i>
        </div>
      </div>
      <div class="report-history-list">
        <div class="report-history-item">
          DGA DV 09/06/2024 #R4
        </div>
        <div class="report-history-item">
          Torque Spec DV 09/06/2024 #R3
        </div>
        <div class="report-history-item">
          Oil Change DV 06/22/2024 #R2
        </div>
        <div class="report-history-item">
          Bushing Repair DV 04/27/2024 #R1
        </div>
      </div>
    </div>
  </div>

  <!-- Active Items Section -->
  <div class="active-items">
    <h3>Active Items</h3>
    <div class="active-item">
      09-28-25 13:30
      <div class="item-details">
        Item: T-R/A-3 Customer: Bit Digital Est. Downtime: N/A Outstanding: <a href="#">Attach Analysis</a>
      </div>
    </div>
    <div class="active-item">
      09-28-25 13:30
      <div class="item-details">
        Item: Swap for Repair Customer: Bit Digital Est. Downtime: 8hrs Outstanding: N/A
      </div>
    </div>
  </div>
</div>
